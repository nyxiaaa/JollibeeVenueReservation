{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\illog\\\\JollibeeVenueReservation\\\\src\\\\pages\\\\Reviews.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { collection, addDoc, getDocs, doc, getDoc } from \"firebase/firestore\";\nimport { db, auth } from \"../firebaseConfig\"; // Import Firebase configuration\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Reviews = () => {\n  _s();\n  const [reviews, setReviews] = useState([]);\n  const [reviewText, setReviewText] = useState(\"\");\n  const [userRole, setUserRole] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  useEffect(() => {\n    const fetchReviews = async () => {\n      try {\n        const querySnapshot = await getDocs(collection(db, \"reviews\"));\n        const reviewsList = querySnapshot.docs.map(doc => ({\n          id: doc.id,\n          ...doc.data()\n        }));\n        setReviews(reviewsList);\n      } catch (error) {\n        console.error(\"Error fetching reviews:\", error);\n      }\n    };\n    const checkAuthStatus = () => {\n      onAuthStateChanged(auth, async user => {\n        if (user) {\n          setIsAuthenticated(true);\n          try {\n            const userDoc = await getDoc(doc(db, \"users\", user.uid));\n            if (userDoc.exists()) {\n              setUserRole(userDoc.data().role); // 'user' or 'staff'\n            }\n          } catch (error) {\n            console.error(\"Error fetching user role:\", error);\n          }\n        } else {\n          setIsAuthenticated(false);\n          setUserRole(null);\n        }\n      });\n    };\n    fetchReviews();\n    checkAuthStatus();\n  }, []);\n  const handleReviewSubmit = async e => {\n    e.preventDefault();\n    if (!isAuthenticated) {\n      alert(\"You need to log in to leave a review.\");\n      return;\n    }\n    try {\n      const newReview = {\n        reviewText,\n        user: auth.currentUser.email,\n        date: new Date().toISOString()\n      };\n      const docRef = await addDoc(collection(db, \"reviews\"), newReview);\n      const reviewWithId = {\n        id: docRef.id,\n        ...newReview\n      };\n      setReviews(prev => [...prev, reviewWithId]);\n      setReviewText(\"\");\n    } catch (error) {\n      console.error(\"Error submitting review:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reviews-container\",\n    style: {\n      padding: \"20px\",\n      textAlign: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Customer Reviews\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        margin: \"20px 0\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          marginRight: \"20px\"\n        },\n        children: reviews.map(review => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            border: \"1px solid #ccc\",\n            margin: \"10px 0\",\n            padding: \"10px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: review.user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), \": \", review.reviewText]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              fontSize: \"12px\",\n              color: \"gray\"\n            },\n            children: new Date(review.date).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this)]\n        }, review.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: userRole === \"staff\" ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Staff members can only view reviews.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this) : isAuthenticated ? /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleReviewSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: reviewText,\n            onChange: e => setReviewText(e.target.value),\n            placeholder: \"Write your review here\",\n            style: {\n              width: \"100%\",\n              height: \"100px\",\n              marginBottom: \"10px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please log in to leave a review.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(Reviews, \"OwSevAAzLJ5DOV18Z4pXONLoz+M=\");\n_c = Reviews;\nexport default Reviews;\nvar _c;\n$RefreshReg$(_c, \"Reviews\");","map":{"version":3,"names":["React","useState","useEffect","collection","addDoc","getDocs","doc","getDoc","db","auth","onAuthStateChanged","jsxDEV","_jsxDEV","Reviews","_s","reviews","setReviews","reviewText","setReviewText","userRole","setUserRole","isAuthenticated","setIsAuthenticated","fetchReviews","querySnapshot","reviewsList","docs","map","id","data","error","console","checkAuthStatus","user","userDoc","uid","exists","role","handleReviewSubmit","e","preventDefault","alert","newReview","currentUser","email","date","Date","toISOString","docRef","reviewWithId","prev","className","style","padding","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","margin","flex","marginRight","review","border","fontSize","color","toLocaleString","onSubmit","value","onChange","target","placeholder","width","height","marginBottom","type","_c","$RefreshReg$"],"sources":["C:/Users/illog/JollibeeVenueReservation/src/pages/Reviews.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { collection, addDoc, getDocs, doc, getDoc } from \"firebase/firestore\";\r\nimport { db, auth } from \"../firebaseConfig\"; // Import Firebase configuration\r\nimport { onAuthStateChanged } from \"firebase/auth\";\r\n\r\nconst Reviews = () => {\r\n  const [reviews, setReviews] = useState([]);\r\n  const [reviewText, setReviewText] = useState(\"\");\r\n  const [userRole, setUserRole] = useState(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchReviews = async () => {\r\n      try {\r\n        const querySnapshot = await getDocs(collection(db, \"reviews\"));\r\n        const reviewsList = querySnapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setReviews(reviewsList);\r\n      } catch (error) {\r\n        console.error(\"Error fetching reviews:\", error);\r\n      }\r\n    };\r\n\r\n    const checkAuthStatus = () => {\r\n      onAuthStateChanged(auth, async (user) => {\r\n        if (user) {\r\n          setIsAuthenticated(true);\r\n          try {\r\n            const userDoc = await getDoc(doc(db, \"users\", user.uid));\r\n            if (userDoc.exists()) {\r\n              setUserRole(userDoc.data().role); // 'user' or 'staff'\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error fetching user role:\", error);\r\n          }\r\n        } else {\r\n          setIsAuthenticated(false);\r\n          setUserRole(null);\r\n        }\r\n      });\r\n    };\r\n\r\n    fetchReviews();\r\n    checkAuthStatus();\r\n  }, []);\r\n\r\n  const handleReviewSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!isAuthenticated) {\r\n      alert(\"You need to log in to leave a review.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const newReview = {\r\n        reviewText,\r\n        user: auth.currentUser.email,\r\n        date: new Date().toISOString(),\r\n      };\r\n\r\n      const docRef = await addDoc(collection(db, \"reviews\"), newReview);\r\n      const reviewWithId = { id: docRef.id, ...newReview };\r\n\r\n      setReviews((prev) => [...prev, reviewWithId]);\r\n      setReviewText(\"\");\r\n    } catch (error) {\r\n      console.error(\"Error submitting review:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"reviews-container\" style={{ padding: \"20px\", textAlign: \"center\" }}>\r\n      <h1>Customer Reviews</h1>\r\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", margin: \"20px 0\" }}>\r\n        <div style={{ flex: 1, marginRight: \"20px\" }}>\r\n          {reviews.map((review) => (\r\n            <div key={review.id} style={{ border: \"1px solid #ccc\", margin: \"10px 0\", padding: \"10px\" }}>\r\n              <p>\r\n                <strong>{review.user}</strong>: {review.reviewText}\r\n              </p>\r\n              <p style={{ fontSize: \"12px\", color: \"gray\" }}>{new Date(review.date).toLocaleString()}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div>\r\n          {userRole === \"staff\" ? (\r\n            <p>Staff members can only view reviews.</p>\r\n          ) : isAuthenticated ? (\r\n            <form onSubmit={handleReviewSubmit}>\r\n              <textarea\r\n                value={reviewText}\r\n                onChange={(e) => setReviewText(e.target.value)}\r\n                placeholder=\"Write your review here\"\r\n                style={{ width: \"100%\", height: \"100px\", marginBottom: \"10px\" }}\r\n              />\r\n              <button type=\"submit\">Submit</button>\r\n            </form>\r\n          ) : (\r\n            <p>Please log in to leave a review.</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Reviews;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}